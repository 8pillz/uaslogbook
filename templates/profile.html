{% extends "base.html" %}

{% block title %}Profile & documents â€“ UAS Logbook{% endblock %}

{% block content %}
<div class="app-actions">
    <div class="app-actions-left">
        <div class="app-actions-title">Profile & documents</div>
        <div class="app-actions-sub">
            Manage your photo, certificates and preferences.
        </div>
    </div>
</div>

<div class="profile-layout">
    <section class="profile-card">
        <h2>Pilot</h2>
        <div class="profile-header">
            {% if profile.profile_photo %}
                <img src="{{ profile.profile_photo.url }}" alt="Profile photo" class="profile-avatar">
            {% else %}
                <div class="profile-avatar-empty">
                    {{ request.user.username|first|upper }}
                </div>
            {% endif %}
            <div>
                <div class="profile-name">{{ request.user.get_full_name|default:request.user.username }}</div>
                <div class="profile-username">@{{ request.user.username }}</div>
            </div>
        </div>
    </section>

    <section class="profile-card">
        <h2>Documents & preferences</h2>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-section-grid">
                <div class="form-field">
                    <label class="form-label" for="{{ form.profile_photo.id_for_label }}">Profile photo</label>
                    {{ form.profile_photo }}
                </div>

                <div class="form-field">
                    <label class="form-label" for="{{ form.medical_certificate.id_for_label }}">Medical certificate (PDF)</label>
                    {{ form.medical_certificate }}
                    {% if profile.medical_certificate %}
                        <div class="doc-link">
                            Current: <a href="{{ profile.medical_certificate.url }}" target="_blank">Open</a>
                        </div>
                    {% endif %}
                </div>

                <div class="form-field">
                    <label class="form-label" for="{{ form.flight_crew_license.id_for_label }}">Flight crew licence (PDF)</label>
                    {{ form.flight_crew_license }}
                    {% if profile.flight_crew_license %}
                        <div class="doc-link">
                            Current: <a href="{{ profile.flight_crew_license.url }}" target="_blank">Open</a>
                        </div>
                    {% endif %}
                </div>

                <div class="form-field">
                    <label class="form-label" for="{{ form.other_document.id_for_label }}">Other document</label>
                    {{ form.other_document }}
                    {% if profile.other_document %}
                        <div class="doc-link">
                            Current: <a href="{{ profile.other_document.url }}" target="_blank">Open</a>
                        </div>
                    {% endif %}
                </div>

                {% if form.time_display_unit %}
                <div class="form-field">
                    <label class="form-label" for="{{ form.time_display_unit.id_for_label }}">Flight time display</label>
                    {{ form.time_display_unit }}
                </div>
                {% endif %}
            </div>

            <div class="form-footer" style="margin-top:12px;">
                <button type="submit" class="btn btn-primary">Save profile</button>
            </div>
        </form>
    </section>
</div>
{% endblock %}
